# Makefile

# defaults
SIM ?= verilator
TOPLEVEL_LANG ?= verilog
EXTRA_ARGS += --trace --trace-structs -Wno-fatal
WAVES = 1

# Verilog sources
VERILOG_SOURCES += $(PWD)/../../vendor/axi_pkg.sv
VERILOG_SOURCES += $(PWD)/../../vendor/cf_math_pkg.sv
VERILOG_SOURCES += $(PWD)/../../vendor/axi_intf.sv
VERILOG_SOURCES += $(PWD)/../../vendor/rand_id_queue.sv
VERILOG_SOURCES += $(PWD)/../../vendor/prim_assert.sv
VERILOG_SOURCES += $(PWD)/../../vendor/prim_util_pkg.sv
VERILOG_SOURCES += $(PWD)/../../vendor/pulp-riscv-dbg/src/dm_pkg.sv
VERILOG_SOURCES += $(PWD)/../../vendor/pulp-riscv-dbg/debug_rom/debug_rom.sv
VERILOG_SOURCES += $(PWD)/../../vendor/addr_decode_dync.sv
VERILOG_SOURCES += $(PWD)/../../vendor/addr_decode.sv

VERILOG_SOURCES += $(PWD)/../../vendor/axi_lite_from_mem.sv
VERILOG_SOURCES += $(PWD)/../../vendor/lzc.sv
VERILOG_SOURCES += $(PWD)/../../vendor/rr_arb_tree.sv
VERILOG_SOURCES += $(PWD)/../../vendor/prim_fifo_sync_cnt.sv
VERILOG_SOURCES += $(PWD)/../../vendor/prim_generic_clock_mux2.sv
VERILOG_SOURCES += $(PWD)/../../vendor/prim_clock_inv.sv
VERILOG_SOURCES += $(PWD)/../../vendor/prim_clock_mux2.sv
VERILOG_SOURCES += $(PWD)/../../vendor/prim_generic_flop.sv
VERILOG_SOURCES += $(PWD)/../../vendor/prim_flop.sv
VERILOG_SOURCES += $(PWD)/../../vendor/prim_flop_2sync.sv
VERILOG_SOURCES += $(PWD)/../../vendor/prim_sync_reqack.sv
VERILOG_SOURCES += $(PWD)/../../vendor/prim_fifo_async_simple.sv
VERILOG_SOURCES += $(PWD)/../../vendor/prim_fifo_sync.sv
VERILOG_SOURCES += $(PWD)/../../vendor/fifo_v3.sv
VERILOG_SOURCES += $(PWD)/../../vendor/delta_counter.sv
VERILOG_SOURCES += $(PWD)/../../vendor/counter.sv
VERILOG_SOURCES += $(PWD)/../../vendor/spill_register.sv
VERILOG_SOURCES += $(PWD)/../../vendor/spill_register_flushable.sv

VERILOG_SOURCES += $(PWD)/../../packages/holy_core_pkg.sv
VERILOG_SOURCES += $(PWD)/../../tb/holy_core/axi_if_convert.sv

VERILOG_SOURCES += $(PWD)/../../vendor/pulp-riscv-dbg/src/dm_csrs.sv
VERILOG_SOURCES += $(PWD)/../../vendor/pulp-riscv-dbg/src/dmi_jtag_tap.sv
VERILOG_SOURCES += $(PWD)/../../vendor/pulp-riscv-dbg/src/dmi_cdc.sv
VERILOG_SOURCES += $(PWD)/../../vendor/pulp-riscv-dbg/src/dm_sba.sv
VERILOG_SOURCES += $(PWD)/../../vendor/pulp-riscv-dbg/src/dm_mem.sv
VERILOG_SOURCES += $(PWD)/../../vendor/pulp-riscv-dbg/src/dmi_jtag.sv
VERILOG_SOURCES += $(PWD)/../../vendor/pulp-riscv-dbg/src/dm_top.sv

VERILOG_SOURCES += $(PWD)/../../vendor/stream_join_dynamic.sv
VERILOG_SOURCES += $(PWD)/../../vendor/stream_join.sv
VERILOG_SOURCES += $(PWD)/../../vendor/stream_fifo.sv
VERILOG_SOURCES += $(PWD)/../../vendor/stream_fork_dynamic.sv
VERILOG_SOURCES += $(PWD)/../../vendor/stream_fork.sv
VERILOG_SOURCES += $(PWD)/../../vendor/stream_mux.sv
VERILOG_SOURCES += $(PWD)/../../vendor/axi_to_detailed_mem.sv
VERILOG_SOURCES += $(PWD)/../../vendor/axi_to_mem.sv
VERILOG_SOURCES += $(PWD)/../../vendor/axi_lite_to_axi.sv
VERILOG_SOURCES += $(PWD)/../../vendor/axi_lite_mux.sv
VERILOG_SOURCES += $(PWD)/../../vendor/axi_err_slv.sv
VERILOG_SOURCES += $(PWD)/../../vendor/axi_lite_demux.sv
VERILOG_SOURCES += $(PWD)/../../vendor/axi_lite_xbar.sv

VERILOG_SOURCES += $(PWD)/dm_top_to_axi_lite.sv
EXTRA_ARGS += $(PWD)/../../packages/axi_if.sv
EXTRA_ARGS += $(PWD)/../../packages/axi_lite_if.sv
EXTRA_ARGS += $(PWD)/axi_translator.sv

# includes
EXTRA_ARGS += -I$(PWD)/../../vendor/include
EXTRA_ARGS += -I$(PWD)/../../vendor/include/common_cells
EXTRA_ARGS += -I$(PWD)/../../vendor/include/axi

# TOPLEVEL is the name of the toplevel module in your Verilog or VHDL file
TOPLEVEL = axi_translator

# MODULE is the basename of the Python test file
MODULE = test_glue_logic

# include cocotb's make rules to take care of the simulator setup
include $(shell cocotb-config --makefiles)/Makefile.sim